<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="commentMapper">

  <!--댓글 -->
  <resultMap type="Comment" id="commentResult">
    <result column="BOARD_NO" property="boardNo"/>
    <result column="STATUS" property="status"/>
    <result column="MEMBER_NO" property="memberNo"/>
    <result column="COMMENT_NO" property="commentNo"/>
    <result column="COMMENT_CONTENT" property="commentContent"/>
    <result column="COMMENT_DATE" property="commentDate"/>
    <result column="COMMENT_ANSWER_TYPE" property="commentAnswerType"/>
    <result column="REF_COMMENT_NO" property="refCommentNo"/>
  </resultMap>
  
<!-- 해당 게시글의 댓글 목록 조회 -->
  <select id="selectCommentList" resultMap="commentResult" parameterType="int">
    SELECT *
    FROM COMMENTS
    WHERE BOARD_NO = #{boardNo}
    ORDER BY COMMENT_DATE DESC
</select>

  <!-- 게시글 댓글 추가 -->
 <insert id="insertComment" parameterType="Comment">
    INSERT INTO COMMENTS (
        BOARD_NO,
        COMMENT_NO,
        COMMENT_CONTENT,
        MEMBER_NO,
        COMMENT_DATE
    ) VALUES (
        #{boardNo},
        #{commentNo},
        #{commentContent},
        #{memberNo},
        #{commentDate}
    )
</insert>
<!-- 게시글 댓글 삭제 -->
<delete id="deleteComment" parameterType="int">
    DELETE FROM COMMENTS
    WHERE COMMENT_NO = #{commentNo}
</delete>

  
</mapper>
